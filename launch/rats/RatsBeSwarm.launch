<launch>
  <arg name="javanode"/>
  <arg name="takeoff_time_in_secs"/>
  <arg name="start_following_trajectory_time_in_secs"/>

  <include file="$(find bebop_tools)/launch/joy_teleop.launch"/>

  <node pkg="rats" type="BeSwarm" name="BeSwarm" args="$(arg javanode)" output="screen"/>

  <!--TODO: use private parameters here-->
  <param name="beswarm/takeoff_time_in_secs" value="$(arg takeoff_time_in_secs)"/>
  <param name="beswarm/start_following_trajectory_time_in_secs"
         value="$(arg start_following_trajectory_time_in_secs)"/>

  <param name="beswarm/pid_lag_time_in_seconds" value="1.0"/>

  <param name="beswarm/pid_linear_x_kp" value="0.3"/>
  <param name="beswarm/pid_linear_x_kd" value="1.0"/>
  <param name="beswarm/pid_linear_x_ki" value="0.0"/>

  <param name="beswarm/pid_linear_y_kp" value="0.3"/>
  <param name="beswarm/pid_linear_y_kd" value="1.0"/>
  <param name="beswarm/pid_linear_y_ki" value="0.0"/>

  <param name="beswarm/pid_linear_z_kp" value="0.8"/>
  <param name="beswarm/pid_linear_z_kd" value="0.2"/>
  <param name="beswarm/pid_linear_z_ki" value="0.0"/>

  <param name="beswarm/pid_angular_z_kp" value="0.3"/>
  <param name="beswarm/pid_angular_z_kd" value="0.4"/>
  <param name="beswarm/pid_angular_z_ki" value="0.0"/>

  <!-- records flight -->
  <node pkg="rosbag" type="record" name="rosbag_record_all"
        args="/bebop/image_raw /bebop/cmd_vel /bebop/odom /tf /bebop/camera_info /arlocros/pose"/>

  <node pkg="rostopic" type="rostopic" name="point camera downwards"
        args="pub /bebop/camera_control geometry_msgs/Twist '[0.0,0.0,0.0]' '[.00,-50.0,0.0]'"
        output="screen"/>
</launch>
